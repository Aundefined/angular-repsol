<div class="row">
    <div class="filtros col-2">
        <div class="contenedor-acordeon" style="min-width: 130px;">
            <div class="panel-group" id="acordeon" role="tablist" aria-multiselectable="true">
                <div class="panel">
                    <div class="panel-heading panel-heading-principal" role="tab" id="acordeon-item-1">
                        <h4 class="panel-title">
                            <a class="acordeon-header icon-after iconos-repsol icon-arrow-down-sign-to-navigate" role="button" data-toggle="collapse" data-parent="#acordeon" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                <span class="acordeon-header-text">FILTROS: </span>
                            </a>
                            <div style="float: right;">
                                <button type="button" class="btn refrescar" (click)="ocultarFiltros()" title="Ocultar filtros" style="">
                                    <i class="fa fa-arrow-left"></i>
                                </button>
                                <button type="button" class="btn refrescar" (click)="limpiarFiltros()" title="Limpiar filtros" style="">                      
                                    <i class="fa fa-sync-alt"></i>
                                </button>
                            </div>
                        </h4>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-heading" role="tab" id="acordeon-item-1">
                        <h4 class="panel-title">
                            <a class="acordeon-header icon-after iconos-repsol icon-arrow-down-sign-to-navigate" role="button" data-toggle="collapse" data-parent="#acordeon" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne"><span class="acordeon-header-text">CATALOGACIÓN</span></a>
                        </h4>
                    </div>
                    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="acordeon-item-1">
                        <div class="panel-body">
                            <div class="checkbox-box">
                                <div class="checkbox-vertical">
                                    <div class="checkbox-btn" *ngFor="let catalogacion of filtros.listaCatalogacion" style="font-size: 14px;padding-bottom: 2px">
                                        <input type="checkbox" value="catalogacion.DESCRIPCION" id="{{catalogacion.ID}}" class="filtro" name="{{catalogacion.ID}}" />
                                        <label for="{{catalogacion.ID}}" (click)="setFiltros(catalogacion.ID,'tipoCatalogacion')" style="margin-bottom: 0px">{{catalogacion.DESCRIPCION}}</label>
                                    </div>

                                    <!-- <div id="collapseAnidado" class="collapse-anidado panel-collapse collapse in" role="tabpanel" aria-labelledby="acordeon-item-1">
                            <div class="checkbox-box">
                            <div class="checkbox-vertical">
                                <div class="checkbox-btn">
                                    <input type="checkbox" value="valor1" id="valor1" class="filtro" name="valor1" />
                                    <label for="valor1" onclick>Locales</label>
                                </div>
                                <div class="checkbox-btn">
                                    <input type="checkbox" value="valor2" id="valor2" class="filtro" name="valor2" />
                                    <label for="valor2" onclick>Red abanderada</label>
                                </div>
                            </div>
                            </div>
                        </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-heading" role="tab" id="acordeon-item-2">
                        <h4 class="panel-title">
                            <a class="collapsed acordeon-header icon-after iconos-repsol icon-arrow-down-sign-to-navigate" role="button" data-toggle="collapse" data-parent="#acordeon" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                <span class="acordeon-header-text">FAMILIAS</span>
                            </a>
                        </h4>
                    </div>
                    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="acordeon-item-2">
                        <div class="panel-body">
                            <div class="checkbox-box">
                                <div class="checkbox-vertical">

                                    <div class="checkbox-btn" *ngFor="let categoria of filtros.listaCategorias; let i=index">
                                        <input type="checkbox" value="{{categoria.NOMBRE}}" id="{{categoria.CODIGO_REPSOL}}" attr.data-id-padre="{{categoria.CODIGO_REPSOL}}" class="custom-checkbox" name="{{categoria.CODIGO_REPSOL}}" (change)="checkFamilias('abuelo'+i, categoria.CODIGO_REPSOL, 'tipoFamilia')" style="width: 30px;height: 30px;z-index: 2;"/>
                                        <label role="button" data-toggle="collapse" data-parent="#collapseTwo" [attr.href]="'#collapse-'+categoria.CODIGO_REPSOL" aria-expanded="false">
                                            {{categoria.CODIGO_REPSOL}} - {{categoria.NOMBRE}}
                                        </label>
                                        <!-- <h4 class="panel-title" style="font-size: 14px">
                                            <a role="button" data-toggle="collapse" data-parent="#collapseTwo" [attr.href]="'#collapse-'+categoria.CODIGO_REPSOL" aria-expanded="false">
                                                {{categoria.CODIGO_REPSOL}} - {{categoria.NOMBRE}}
                                            </a>
                                        </h4> -->

                                        <div id="collapse-{{categoria.CODIGO_REPSOL}}" class="panel-collapse collapse ml-3 mt-2" role="tabpanel">
                                            <div class="checkbox-box">
                                                <div class="checkbox-vertical">
                                                    <div class="checkbox-btn" *ngFor="let familiaPadre of categoria.familiasPadre">
                                                        <input type="checkbox" value="{{familiaPadre.CODIGO_REPSOL}}" id="{{familiaPadre.CODIGO_REPSOL}}" class="filtro" name="{{familiaPadre.CODIGO_REPSOL}}" (change)="checkFamilias(categoria.CODIGO_REPSOL, familiaPadre, 'tipoFamilia')" attr.data-id-padre="{{categoria.CODIGO_REPSOL}}" style="width: 30px;height: 30px;z-index: 2;"/>
                                                        <label role="button" data-toggle="collapse" data-parent="#collapseTwo" [attr.href]="'#collapse-'+familiaPadre.CODIGO_REPSOL" aria-expanded="false">
                                                            {{familiaPadre.CODIGO_REPSOL}} - {{familiaPadre.NOMBRE}}
                                                        </label>
                                                        <!-- <h4 class="panel-title  mb-2" style="font-size: 14px">
                                                            <a role="button" data-toggle="collapse" data-parent="#collapseTwo" [attr.href]="'#collapse-'+familiaPadre.CODIGO_REPSOL" aria-expanded="false">
                                                                {{familiaPadre.CODIGO_REPSOL}} - {{familiaPadre.NOMBRE}}
                                                            </a>
                                                        </h4> -->

                                                        <div id="collapse-{{familiaPadre.CODIGO_REPSOL}}" class="panel-collapse collapse ml-3" role="tabpanel">
                                                            <div class="checkbox-box">
                                                                <div class="checkbox-vertical">
                                                                    <div class="checkbox-btn" *ngFor="let familia of familiaPadre.familias" style="font-size: 14px">
                                                                        <input type="checkbox" value="fam{{familia.ID_FAMILIAS}}" (change)="checkFamilias(familiaPadre.CODIGO_REPSOL,familia.ID_FAMILIAS,'tipoFamilia')" id="{{familia.ID_FAMILIAS}}" attr.data-id-padre="{{familiaPadre.CODIGO_REPSOL}}" class="filtro" name="fam{{familia.ID_FAMILIAS}}" />
                                                                        <label for="{{familia.ID_FAMILIAS}}" >
                                                                            {{familia.CODIGO_REPSOL}} - {{familia.NOMBRE}}
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>




                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-heading" role="tab" id="acordeon-item-3">
                        <h4 class="panel-title">
                            <a class="collapsed acordeon-header icon-after iconos-repsol icon-arrow-down-sign-to-navigate" role="button" data-toggle="collapse" data-parent="#acordeon" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree"><span class="acordeon-header-text">ALMACENAMIENTO</span></a>
                        </h4>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="acordeon-item-3">
                        <div class="panel-body">
                            <div class="checkbox-box">
                                <div class="checkbox-vertical">
                                    <div class="checkbox-btn" *ngFor="let condiAlmacen of filtros.listaCondiAlmacen" style="font-size: 14px">
                                        <input type="checkbox" value="{{condiAlmacen.ID}}" id="{{condiAlmacen.ID}}" class="filtro" name="{{condiAlmacen.ID}}" />
                                        <label for="{{condiAlmacen.ID}}" (click)="setFiltros(condiAlmacen.ID,'tipoAlmacenaje')">{{condiAlmacen.DESCRIPCION}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-heading" role="tab" id="acordeon-item-4">
                        <h4 class="panel-title">
                            <a class="collapsed acordeon-header icon-after iconos-repsol icon-arrow-down-sign-to-navigate" role="button" data-toggle="collapse" data-parent="#acordeon" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour"><span class="acordeon-header-text">CARACTERIZACIÓN</span></a>
                        </h4>
                    </div>
                    
                    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="acordeon-item-4">
                            <div class="panel-body">
                                <div class="checkbox-box">
                                    <div class="checkbox-vertical">
                                        <div class="checkbox-btn" *ngFor="let area of filtros.listaCaracterizaciones">
                                            <!-- <input type="checkbox" value="caract{{area.ID}}" id="caract{{area.ID}}" class="filtro" name="caract{{area.ID}}" />
                                            <label for="caract{{area.ID}}" role="button" data-toggle="collapse" data-parent="#collapseTwo" [attr.href]="'#collapseCaract-'+area.ID" aria-expanded="false">
                                                {{area.NOMBRE_TIPO}}
                                            </label>-->
                                            <h4 class="panel-title" style="font-size: 14px">
                                                <a role="button" data-toggle="collapse" data-parent="#collapseTwo" [attr.href]="'#collapseCaract-'+area.ID" aria-expanded="false">
                                                    {{area.NOMBRE_TIPO}}
                                                </a>
                                            </h4>                                           
    
                                            <div id="collapseCaract-{{area.ID}}" class="panel-collapse collapse ml-3" role="tabpanel">
                                                <div class="checkbox-box">
                                                    <div class="checkbox-vertical">
                                                        <div class="checkbox-btn" *ngFor="let caracteristica of area.listaCaracterizaciones" style="font-size: 14px">
                                                            <input type="checkbox" value="caracteristica{{caracteristica.ID_CARACTERIZACION}}" id="caracteristica{{caracteristica.ID_CARACTERIZACION}}" class="filtro" name="caracteristica{{caracteristica.ID_CARACTERIZACION}}" />
                                                            <label for="caracteristica{{caracteristica.ID_CARACTERIZACION}}" (click)="setFiltros(caracteristica.ID_CARACTERIZACION,'tipoCaracterizacion')">{{caracteristica.CARACTERIZACION}}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                </div>
                <div class="panel">
                    <div class="panel-heading" role="tab" id="acordeon-item-5">
                        <h4 class="panel-title">
                            <a class="acordeon-header icon-after iconos-repsol icon-arrow-down-sign-to-navigate" role="button" data-toggle="collapse" data-parent="#acordeon" href="#collapseFive" aria-expanded="true" aria-controls="collapseFive"><span class="acordeon-header-text">ESTADO</span></a>
                        </h4>
                    </div>
                    <div id="collapseFive" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="acordeon-item-5">
                        <div class="panel-body">
                            <div class="checkbox-box">
                                <div class="checkbox-vertical">
                                    <div class="checkbox-btn" *ngFor="let estado of listaEstados" style="font-size: 14px;padding-bottom: 2px">
                                        <input type="checkbox" value="estado.nombre" id="{{estado.valor}}" class="filtro" name="{{estado.valor}}" />
                                        <label for="{{estado.valor}}" (click)="setFiltros(estado.valor,'tipoEstado')" style="margin-bottom: 0px">{{estado.nombre}}</label>
                                    </div> 
                                </div>
                            </div>
                            <div class='grupo-input input-group rps-datepicker' id='dtInicio'>
                                <label class="etiqueta-input" for="dtInicio">Fecha inicio:</label>
                                <input type="text" class="input-estandar input-limit rps-calendar"  maxlength="10" id="calendarioInicio" placeholder="dd/mm/aaaa"/>
                            </div>
                            <div class='grupo-input input-group rps-datepicker' id='dtFin'>
                                <label class="etiqueta-input" for="dtFin">Fecha fin:</label>
                                <input type="text" class="input-estandar input-limit rps-calendar"  maxlength="10" id="calendarioFin" placeholder="dd/mm/aaaa"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="div-articulos" class="ml-auto" [ngClass]="filtroOculto?'col-12': 'col-10'">

        <div class="container-fluid container-breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a (click)="refresh()">Artículos</a></li>
                <li class="breadcrumb-item active" aria-current="page">Consulta de artículos</li>
            </ol>
        </div>
        <div class="pestana-filtros">
            <div class="rps-button_addons input-group">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" title="Mostrar filtros" (click)="mostrarFiltros()">                      
                        <i class="fa fa-filter"></i>
                    </button>
                </span>
            </div>
        </div>
        <div class="catalogo row">
            <div class="buscador col-sm-9 col-md-8 col-lg-6 col-xl-5 ml-auto">
                <div class="rps-button_addons input-group">
                    <input #busqueda type="text" class="form-control" id="txtBusqueda" (keyup)="searchSugerencia($event)" (keyup.enter)="search(busqueda,'ARTICULOS')" (focusout)="hideResults(busqueda)" placeholder="Introduce contenido para buscar">
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" (click)="search(busqueda,'ARTICULOS')">Buscar</button>
                    </span>
                </div>
                <!-- <input #busqueda class="form-control form-control-sm" (keyup)="searchSugerencia($event)" (keyup.enter)="search(busqueda)" type="text" placeholder="Es un input" />
            -->

                <div class="sugerencias" [hidden]="hideSugerencias">
                    <div id="colores" class="list-group">
                        <a id="buscaren" class="list-group-item list-group-item-action" data-nombre="JERARQUIA" (click)="search(busqueda,'JERARQUIA')">Buscar por <span class="buscarPor">Jerarquía de Familias</span></a>
                        <a id="buscaren" class="list-group-item list-group-item-action" data-nombre="PROVEEDORES" (click)="search(busqueda,'PROVEEDORES')">Buscar por <span class="buscarPor">Proveedores</span></a>
                    </div>
                    <div id="colores" class="list-group">
                        <a #autocompletar *ngFor="let sugerencia of sugerencias" class="list-group-item list-group-item-action" (click)="confirmSearch(busqueda,sugerencia.NOMBRE_ARTICULO)">{{sugerencia.NOMBRE_ARTICULO}}</a>
                    </div>
                </div>
            </div>
            <div class="catalogoEstilo btn-group btn-group-toggle ml-auto" data-toggle="buttons" style="right: 0;">
                <label class="btn btn-secondary active" (click)=catalogoCuadricula()>
                    <input type="radio" name="options" id="cuadricula" autocomplete="off"><i class="fas fa-th"></i>
                </label>
                <label class="btn btn-secondary" (click)=catalogoFila()>
                    <input type="radio" name="options" id="filas" autocomplete="off" (click)=catalogoFila() ><i class="fas fa-bars"></i>
                </label>
            </div>
        </div>
        <div class="catalogo justify-content-center">
            <div class="catalogo row">
                <div class="col-12">
                    <div class="card-deck">
                        <div class="item" [ngClass]="{'item-fila': modoFila}" *ngFor="let item of getArticulosSinProveedor(); let i = index">
                            <div class="card" [ngClass]="{'card-fila': modoFila}">
                                <!-- <div [ngClass]="{ 'card-imagen': item.ESTADO, 'imagen-baja': item.ESTADO === 'Baja'}">
                                    Foto para src: {{item.FOTO}}
                                    <img class="card-img-top" [routerLink]="['/detalle-articulos',item.ID_ARTICULO]" src="http://www.hielosahy.com/tienda/25/coca-cola-20-cl-no-retornable.jpg" alt="Card image cap">
                                </div> -->
                                <div [ngClass]="{ 'card-imagen': item.ESTADO,'card-imagen-fila': modoFila}" style="position: relative">
                                    <!-- Foto para src: {{item.FOTO}}-->
                                    <img *ngIf="item.ESTADO != 'Baja'" class="card-img-top" [routerLink]="['/detalle-articulos',item.ID_ARTICULO]" src="http://www.hielosahy.com/tienda/25/coca-cola-20-cl-no-retornable.jpg" alt="Card image cap">
                                    <img *ngIf="item.ESTADO === 'Baja'" class="card-img-top" src="../../assets/imgBaja.png" style="transform: rotate(-30deg); position: absolute;">
                                    <img *ngIf="item.ESTADO === 'Baja'" class="card-img-top" [routerLink]="['/detalle-articulos',item.ID_ARTICULO]" src="http://www.hielosahy.com/tienda/25/coca-cola-20-cl-no-retornable.jpg" alt="Card image cap" style="opacity: 0.5;">
                                </div>
                                <div class="card-body" [ngClass]="{'card-body-fila': modoFila}">
                                    <h6 class="card-text text-truncate" title="{{item.NOMBRE_ARTICULO}}">{{item.NOMBRE_ARTICULO}}</h6>
                                    <p class="card-text text-truncate" title="{{item.REFERENCIA}} - {{item.NOMBRE_ARTICULO}}"><small>{{item.REFERENCIA}} - {{item.NOMBRE_ARTICULO}}</small></p>
                                    <p class="card-text text-truncate" title="{{item.FAMILIA}} - {{item.NOMBRE_GRUPO}}"><small>{{item.FAMILIA}} - {{item.NOMBRE_GRUPO}}</small></p>
                                    <p class="card-text text-truncate" title="{{item.COD_BARRAS}}"><small>{{item.COD_BARRAS}}</small></p>
                                    <p class="card-text text-truncate" title="{{item.DESCRIPCION_CATALOGACION}}"><small>Catalogación: {{item.DESCRIPCION_CATALOGACION}}</small></p>

                                    <!-- <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p> -->
                                </div>
                                <div class="card-body d-none_DELETE" [ngClass]="{'d-block': modoFila,'d-none': modoCuadricula,'card-body-fila': modoFila}">
                                    <p class="card-text text-truncate" title="{{item.DESCRIPCION_ALMACENAJE}}"><small>Almacenamiento: {{item.DESCRIPCION_ALMACENAJE}}</small></p>
                                    <p class="card-text text-truncate" title={{item.ESTADO}}><small>Estado:  </small><span [ngClass]="{ 'badge': item.ESTADO, 'badge-success': item.ESTADO === 'Alta', ' alert-warning': (item.ESTADO === 'Bloqueado para la compra') || (item.ESTADO === 'Bloqueado para la venta'), ' alert-danger': item.ESTADO === 'Baja' }">{{item.ESTADO}}</span></p>
                                    <p class="card-text text-truncate" title={{item.ESTADO}}><small>Fecha:  </small><span [ngClass]="{ 'badge': item.ESTADO, 'badge-success': item.ESTADO === 'Alta', ' alert-warning': (item.ESTADO === 'Bloqueado para la compra') || (item.ESTADO === 'Bloqueado para la venta'), ' alert-danger': item.ESTADO === 'Baja' }">{{item.FECHA_ESTADO | date: 'dd/MM/yyyy'}}</span></p>
                                    <p class="card-text text-truncate" title="Articulo en Promoción"><span *ngIf="item.PROMOCION" class="badge badge-info">Articulo en Promoción</span></p>
                                </div>
                                <!-- <div class="card-body d-none">
                                    <h6 class="card-text text-truncate">PROVEEDOR:</h6>
                                    <p class="card-text text-truncate" title={{item.NOMBRE}}><small>Codigo: {{item.CODIGO_PROVEER}}</small></p>
                                    <p class="card-text text-truncate" title={{item.NOMBRE}}><small>Nombre: {{item.NOMBRE_PROVEEDOR}}</small></p>
                                    <p class="card-text text-truncate" title={{item.NOMBRE}}><small>Referencia: {{item.SU_REF}}</small></p>
                                </div> -->
                                <div class="card-body d-none_DELETE" [ngClass]="{'d-block': modoFila,'d-none': modoCuadricula,'card-body-fila': modoFila}" style="padding: 8px !important">
                                    <div id="carouselExampleControls{{i}}" class="carousel slide" data-ride="carousel" data-interval="false">
                                        <div class="carousel-inner" style="text-align: center">
                                            <div class="carousel-item" [ngClass]="{'active': in === 0 }" *ngFor="let proveedor of getProveedorReferencia(item.REFERENCIA); let in = index">
                                                <h6 class="card-text text-truncate">PROVEEDOR:</h6>
                                                <p class="card-text text-truncate" title={{proveedor.NOMBRE}}><small>Codigo: {{proveedor.CODIGO_PROVEER}}</small></p>
                                                <p class="card-text text-truncate" title={{proveedor.NOMBRE}}><small>Nombre: {{proveedor.NOMBRE_PROVEEDOR}}</small></p>
                                                <p class="card-text text-truncate" title={{proveedor.NOMBRE}}><small>Referencia: {{proveedor.SU_REF}}</small></p>
                                            </div>

                                        </div>
                                        <a class="carousel-control-prev bg-dark" style="width: 8% !important;" href="#carouselExampleControls{{i}}" role="button" data-slide="prev">
                                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Previous</span>
                                        </a>
                                        <a class="carousel-control-next bg-dark" style="width: 8% !important;" href="#carouselExampleControls{{i}}" role="button" data-slide="next">
                                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                            <span class="sr-only">Next</span>
                                        </a>
                                    </div>
                                </div>



                            </div>
                        </div>
                        <!--end Item-->
                    </div>
                </div>
            </div>
            <!--end Catalogo row-->
            <div class="row">
                <div class="col-12">
                    <app-pagination
                        (goPage)="goToPage($event)"
                        (goNext)="onNext()"
                        (goPrev)="onPrev()"
                        [pagesToShow]="3"
                        [page]="page"
                        [perPage]="limit"
                        [count]="total"></app-pagination>
                </div>
            </div>
        </div>
    </div>
</div>
<app-loading-component></app-loading-component>

      
    
  
